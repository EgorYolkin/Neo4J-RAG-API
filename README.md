# üöÄ Neo4j GraphRAG System

Production-ready —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å RAG (Retrieval-Augmented Generation) –Ω–∞ –±–∞–∑–µ –≥—Ä–∞—Ñ–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Neo4j —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º Redis.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- üß† **GraphRAG** - Retrieval-Augmented Generation —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≥—Ä–∞—Ñ–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Neo4j
- üîç **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫** - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –∏ –≥—Ä–∞—Ñ–æ–≤—ã–π –ø–æ–∏—Å–∫ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏
- üíæ **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - Redis-–∫—ç—à —Å –ø–æ–∏—Å–∫–æ–º –ø–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É
- ü§ñ **–õ–æ–∫–∞–ª—å–Ω—ã–µ LLM** - Ollama –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–æ–¥–µ–ª–µ–π –±–µ–∑ –æ–±–ª–∞–∫–∞
- üîó **LangGraph workflows** - –°–ª–æ–∂–Ω—ã–µ RAG-–ø–∞–π–ø–ª–∞–π–Ω—ã —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- üåê **REST API** - FastAPI —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Backend**: FastAPI + Uvicorn
- **Graph Database**: Neo4j 5.x —Å APOC –ø–ª–∞–≥–∏–Ω–∞–º–∏
- **Vector Search**: Neo4j Vector Index (cosine similarity)
- **Cache**: Redis 7.x —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **LLM Framework**: LangChain + LangGraph
- **Embeddings & LLM**: Ollama (llama3.1, nomic-embed-text)
- **Language**: Python 3.12+

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
Neo4jRAG/
‚îú‚îÄ‚îÄ app.py                          # FastAPI entry point
‚îú‚îÄ‚îÄ main.py                         # CLI tool –¥–ª—è —Ç–µ—Å—Ç–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ neo4jrag/
‚îÇ   ‚îú‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Pydantic)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ api/                        # REST API Layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deps.py                 # FastAPI Dependencies
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ endpoints/          # API endpoints
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ health.py       # Health checks
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ query.py        # RAG queries
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ documents.py    # Document CRUD
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ stats.py        # Graph statistics
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ cache.py        # Cache management
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ middleware/         # CORS, logging, errors
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ router.py           # Main router
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/                       # Business Logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events.py               # Startup/Shutdown handlers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ exceptions.py           # Custom exceptions
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/                   # Service Layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ neo4j/                  # Neo4j services
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ neo4j_connector.py  # Connection & queries
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ graph_builder.py    # Knowledge graph builder
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ vector_store.py     # Vector search
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ollama/                 # Ollama/LLM services
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ollama_loader.py    # Model loader
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rag_pipeline.py     # LangGraph RAG workflow
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cache/                  # Caching services
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ semantic_cache.py   # Redis semantic cache
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ domain/                     # Domain Layer
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas/                # Pydantic schemas
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ request.py          # Request DTOs
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ response.py         # Response DTOs
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ utils/                      # Utilities
‚îÇ       ‚îú‚îÄ‚îÄ logger.py               # Logging setup
‚îÇ       ‚îî‚îÄ‚îÄ validators.py           # Custom validators
‚îÇ
‚îî‚îÄ‚îÄ tests/                          # Tests
    ‚îú‚îÄ‚îÄ test_api/                   # API tests
    ‚îî‚îÄ‚îÄ test_services/              # Service tests
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python** 3.12+
- **Docker** (–¥–ª—è Neo4j –∏ Redis)
- **Ollama** (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM)
- **uv** (–º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ Python)

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —Å Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```
git clone <repository-url>
cd Neo4jRAG
```

**2. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª**
```
cp .env.example .env
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env`:
```
# Application
ENVIRONMENT=development
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO

# Neo4j
NEO4J_URI=bolt://neo4j:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password123
NEO4J_DATABASE=neo4j

# Ollama (–∑–∞–ø—É—â–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ)
OLLAMA_BASE_URL=http://host.docker.internal:11434
OLLAMA_MODEL=llama3.1
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_CACHE_TTL=3600
REDIS_SEMANTIC_THRESHOLD=0.95
REDIS_MAX_CACHE_SIZE=10000
```

**3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Ollama –∏ –º–æ–¥–µ–ª–∏**
```
# macOS
brew install ollama

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å
ollama serve

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª–∏
ollama pull llama3.1
ollama pull nomic-embed-text
```

**4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Docker Compose**
```
cd infra/docker
docker-compose up -d
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- Neo4j (http://localhost:7474, bolt://localhost:7687)
- Redis (localhost:6379)
- FastAPI Backend (http://localhost:8000)

**5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**
```
docker-compose ps
docker-compose logs -f backend
```

**6. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API**
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ Docker –¥–ª—è backend)

**1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uv (–µ—Å–ª–∏ –Ω–µ—Ç)
curl -LsSf https://astral.sh/uv/install.sh | sh

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
uv sync
```

**2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Neo4j –∏ Redis –≤ Docker**
```
# Neo4j
docker run -d \
    --name neo4j-local \
    -p 7474:7474 -p 7687:7687 \
    -e NEO4J_AUTH=neo4j/password123 \
    -e NEO4J_PLUGINS='["apoc"]' \
    neo4j:latest

# Redis
docker run -d \
    --name redis-cache \
    -p 6379:6379 \
    redis:7-alpine
```

**3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ Ollama**
```
# macOS
brew install ollama
ollama serve

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥–µ–ª–∏
ollama pull llama3.1
ollama pull nomic-embed-text
```

**4. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª**
```
# Application
ENVIRONMENT=development
HOST=0.0.0.0
PORT=8000
LOG_LEVEL=INFO

# Neo4j
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=password123
NEO4J_DATABASE=neo4j

# Ollama (–ª–æ–∫–∞–ª—å–Ω–æ)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL=llama3.1
OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# Redis
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_CACHE_TTL=3600
REDIS_SEMANTIC_THRESHOLD=0.95
REDIS_MAX_CACHE_SIZE=10000
```

**5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
```
# –ß–µ—Ä–µ–∑ uv
uv run uvicorn app:app --reload --port 8000

# –ò–ª–∏ —á–µ—Ä–µ–∑ Python –Ω–∞–ø—Ä—è–º—É—é
uv run python app.py
```

**6. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**
- Swagger: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### 1. Health Check
```
curl http://localhost:8000/api/v1/health
```

–û—Ç–≤–µ—Ç:
```
{
  "status": "healthy",
  "components": {
    "neo4j": "healthy",
    "ollama": "healthy",
    "redis": "healthy"
  },
  "version": "1.0.0"
}
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
```
curl -X POST http://localhost:8000/api/v1/documents/ \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
    "content": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ä–∞–∑–¥–µ–ª –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞...",
    "metadata": {"category": "AI"}
  }'
```

### 3. RAG –∑–∞–ø—Ä–æ—Å (–ø–µ—Ä–≤—ã–π —Ä–∞–∑ - –±–µ–∑ –∫—ç—à–∞)
```
curl -X POST http://localhost:8000/api/v1/query/ \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ?",
    "top_k": 3,
    "search_type": "hybrid"
  }'
```

–û—Ç–≤–µ—Ç:
```
{
  "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ?",
  "answer": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ä–∞–∑–¥–µ–ª –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞...",
  "sources": [
    {
      "text": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ...",
      "score": 0.95,
      "doc_title": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ"
    }
  ],
  "search_type": "hybrid",
  "processing_steps": ["–ú–∞—Ä—à—Ä—É—Ç: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫", "–ù–∞–π–¥–µ–Ω–æ 3 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞"],
  "cached": false
}
```

### 4. –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–∏–∑ –∫—ç—à–∞)
```
curl -X POST http://localhost:8000/api/v1/query/ \
  -H "Content-Type: application/json" \
  -d '{
    "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ?"
  }'
```

–û—Ç–≤–µ—Ç:
```
{
  "question": "–ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ?",
  "answer": "–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ ‚Äî —ç—Ç–æ —Ä–∞–∑–¥–µ–ª –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞...",
  "sources": [...],
  "search_type": "hybrid",
  "processing_steps": ["‚úì Retrieved from cache"],
  "cached": true,
  "cache_similarity": 1.0
}
```

### 5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
```
curl http://localhost:8000/api/v1/cache/stats
```

–û—Ç–≤–µ—Ç:
```
{
  "cache_size": 10,
  "max_cache_size": 10000,
  "total_hits": 5,
  "total_misses": 3,
  "hit_rate": 62.5,
  "similarity_threshold": 0.95
}
```

### 6. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä–∞—Ñ–∞
```
curl http://localhost:8000/api/v1/stats/
```

---

## üìö –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python SDK
```
import requests

BASE_URL = "http://localhost:8000/api/v1"

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
response = requests.post(f"{BASE_URL}/documents/", json={
    "title": "GraphRAG Introduction",
    "content": "GraphRAG combines knowledge graphs with RAG...",
    "metadata": {"author": "AI Research Team"}
})
doc = response.json()
print(f"Created document: {doc['id']}")

# RAG –∑–∞–ø—Ä–æ—Å
response = requests.post(f"{BASE_URL}/query/", json={
    "question": "What is GraphRAG?",
    "top_k": 3
})
result = response.json()
print(f"Answer: {result['answer']}")
print(f"Cached: {result['cached']}")

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
response = requests.get(f"{BASE_URL}/documents/?skip=0&limit=10")
docs = response.json()
print(f"Total documents: {docs['total']}")
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ RAG –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:

```
# –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤ –¥–ª—è —Ä–∞–∑–±–∏–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
RAG_CHUNK_SIZE=500
RAG_CHUNK_OVERLAP=50

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
RAG_TOP_K=3

# –ü–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫—ç—à–∞ (0-1)
REDIS_SEMANTIC_THRESHOLD=0.95

# TTL –∫—ç—à–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (1 —á–∞—Å = 3600)
REDIS_CACHE_TTL=3600

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞
REDIS_MAX_CACHE_SIZE=10000
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–µ–ª–µ–π Ollama

```
# LLM –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
OLLAMA_MODEL=llama3.1

# –ú–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:
```
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
ollama list

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å
ollama pull mistral
ollama pull llama2
```

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

**Docker Compose:**
```
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å —É–¥–∞–ª–µ–Ω–∏–µ–º volumes (—É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ!)
docker-compose down -v

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ backend
docker-compose restart backend
```

**–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:**
```
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Neo4j
docker stop neo4j-local

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Redis
docker stop redis-cache

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–Ω–æ–≤–∞
docker start neo4j-local
docker start redis-cache
```

### –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à Redis:**
```
curl -X DELETE http://localhost:8000/api/v1/cache/clear
```

**–û—á–∏—Å—Ç–∏—Ç—å –≥—Ä–∞—Ñ Neo4j:**
```
# –ß–µ—Ä–µ–∑ Neo4j Browser (http://localhost:7474)
MATCH (n) DETACH DELETE n

# –ò–ª–∏ —á–µ—Ä–µ–∑ API
curl -X DELETE http://localhost:8000/api/v1/documents/{document_id}
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

**Docker Compose:**
```
# –í—Å–µ –ª–æ–≥–∏
docker-compose logs -f

# –¢–æ–ª—å–∫–æ backend
docker-compose logs -f backend

# –¢–æ–ª—å–∫–æ Neo4j
docker-compose logs -f neo4j
```

**–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫:**
```
# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f logs/app.log
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Neo4j Browser
- URL: http://localhost:7474
- Login: `neo4j`
- Password: `password123`

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:
```
// –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —É–∑–ª—ã
MATCH (n) RETURN n LIMIT 25

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
MATCH (d:Document) RETURN count(d) as total_documents
MATCH (c:Chunk) RETURN count(c) as total_chunks

// –î–æ–∫—É–º–µ–Ω—Ç—ã —Å —á–∞–Ω–∫–∞–º–∏
MATCH (d:Document)-[:HAS_CHUNK]->(c:Chunk)
RETURN d.title, count(c) as chunks_count
```

### Redis CLI
```
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Redis
docker exec -it redis-cache redis-cli

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á–∏
KEYS semantic_cache:*

# –†–∞–∑–º–µ—Ä –∫—ç—à–∞
ZCARD semantic_cache:embeddings

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
HGETALL semantic_cache:stats
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dev –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
uv add --dev pytest pytest-asyncio httpx

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
uv run pytest tests/ -v

# –° coverage
uv run pytest tests/ --cov=neo4jrag --cov-report=html
```

---

## üêõ Troubleshooting

### Neo4j –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps | grep neo4j

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs neo4j-local

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker restart neo4j-local
```

### Ollama –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
ollama list

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
brew services restart ollama

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
lsof -i :11434
```

### Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker ps | grep redis

# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker exec -it redis-cache redis-cli ping
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: PONG
```

### –ö—ç—à –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
curl http://localhost:8000/api/v1/cache/health

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à
curl -X DELETE http://localhost:8000/api/v1/cache/clear
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **OpenAPI Schema**: http://localhost:8000/openapi.json

---

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ç–æ–∫
- `main` - production-ready –∫–æ–¥
- `develop` - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Ñ–∏—á
- `feature/*` - –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏

### Commit conventions
```
feat: –î–æ–±–∞–≤–∏—Ç—å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
fix: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º –ø–æ–∏—Å–∫–µ
docs: –û–±–Ω–æ–≤–∏—Ç—å README
refactor: –†–µ–æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
test: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è RAG pipeline
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

